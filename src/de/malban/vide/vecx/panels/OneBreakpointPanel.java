/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package de.malban.vide.vecx.panels;

import de.malban.vide.VideConfig;
import de.malban.vide.vecx.Breakpoint;
import java.awt.Color;

/**
 *
 * @author malban
 */
public class OneBreakpointPanel extends javax.swing.JPanel {
    VideConfig config = VideConfig.getConfig();

    Breakpoint breakpoint;
    BreakpointJPanel parent;
    /**
     * Creates new form OneBreakpointPanel
     */
    public OneBreakpointPanel() {
        initComponents();
    }
    public void setParent(BreakpointJPanel p)
    {
        parent = p;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jTextFieldTarget = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        jTextFieldsub = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jTextFieldType = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jTextFieldAddress = new javax.swing.JTextField();
        jTextFieldBank = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jTextFieldCompare = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        jTextFieldCounter = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jTextFieldExit = new javax.swing.JTextField();
        jButtonFileSelect11 = new javax.swing.JButton();
        jLabel9 = new javax.swing.JLabel();
        jTextFieldName = new javax.swing.JTextField();

        setBorder(javax.swing.BorderFactory.createEtchedBorder());
        setLayout(null);

        jLabel1.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel1.setText("target");
        add(jLabel1);
        jLabel1.setBounds(2, 4, 33, 15);

        jTextFieldTarget.setEditable(false);
        jTextFieldTarget.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldTarget);
        jTextFieldTarget.setBounds(90, 2, 101, 19);

        jLabel2.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel2.setText("subsystem");
        add(jLabel2);
        jLabel2.setBounds(227, 4, 58, 15);

        jTextFieldsub.setEditable(false);
        jTextFieldsub.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldsub);
        jTextFieldsub.setBounds(308, 2, 142, 19);

        jLabel3.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel3.setText("type");
        add(jLabel3);
        jLabel3.setBounds(2, 29, 24, 15);

        jTextFieldType.setEditable(false);
        jTextFieldType.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldType);
        jTextFieldType.setBounds(90, 27, 360, 19);

        jLabel4.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel4.setText("target address");
        add(jLabel4);
        jLabel4.setBounds(2, 54, 79, 15);

        jTextFieldAddress.setEditable(false);
        jTextFieldAddress.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldAddress);
        jTextFieldAddress.setBounds(90, 52, 101, 19);

        jTextFieldBank.setEditable(false);
        jTextFieldBank.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jTextFieldBank.setToolTipText("bank");
        add(jTextFieldBank);
        jTextFieldBank.setBounds(195, 52, 20, 19);

        jLabel5.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel5.setText("compare value");
        add(jLabel5);
        jLabel5.setBounds(2, 79, 77, 15);

        jTextFieldCompare.setEditable(false);
        jTextFieldCompare.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldCompare);
        jTextFieldCompare.setBounds(90, 77, 101, 19);

        jLabel6.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel6.setText("counter");
        add(jLabel6);
        jLabel6.setBounds(227, 79, 40, 15);

        jTextFieldCounter.setEditable(false);
        jTextFieldCounter.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldCounter);
        jTextFieldCounter.setBounds(270, 77, 37, 19);

        jLabel8.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel8.setText("exit");
        add(jLabel8);
        jLabel8.setBounds(315, 79, 20, 15);

        jTextFieldExit.setEditable(false);
        jTextFieldExit.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        add(jTextFieldExit);
        jTextFieldExit.setBounds(350, 77, 40, 19);

        jButtonFileSelect11.setIcon(new javax.swing.ImageIcon(getClass().getResource("/de/malban/vide/images/delete.png"))); // NOI18N
        jButtonFileSelect11.setMargin(new java.awt.Insets(0, 1, 0, -1));
        jButtonFileSelect11.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonFileSelect11ActionPerformed(evt);
            }
        });
        add(jButtonFileSelect11);
        jButtonFileSelect11.setBounds(430, 75, 20, 20);

        jLabel9.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jLabel9.setText("name");
        add(jLabel9);
        jLabel9.setBounds(227, 54, 28, 15);

        jTextFieldName.setEditable(false);
        jTextFieldName.setFont(new java.awt.Font("Geneva", 2, 11)); // NOI18N
        jTextFieldName.setToolTipText("bank");
        add(jTextFieldName);
        jTextFieldName.setBounds(270, 50, 180, 19);
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonFileSelect11ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonFileSelect11ActionPerformed
        parent.removeBreakpoint(breakpoint);
    }//GEN-LAST:event_jButtonFileSelect11ActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonFileSelect11;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JTextField jTextFieldAddress;
    private javax.swing.JTextField jTextFieldBank;
    private javax.swing.JTextField jTextFieldCompare;
    private javax.swing.JTextField jTextFieldCounter;
    private javax.swing.JTextField jTextFieldExit;
    private javax.swing.JTextField jTextFieldName;
    private javax.swing.JTextField jTextFieldTarget;
    private javax.swing.JTextField jTextFieldType;
    private javax.swing.JTextField jTextFieldsub;
    // End of variables declaration//GEN-END:variables

    public void setBreakpoint(Breakpoint bp)
    {
        breakpoint = bp;
        jTextFieldTarget.setText(breakpoint.getTargetString());
        jTextFieldsub.setText(breakpoint.getTargetSubtypeString());
        jTextFieldType.setText(breakpoint.getTypeString());
        jTextFieldAddress.setText(String.format("0x%04X", breakpoint.getTargetAddress() & 0xFFFF));
        jTextFieldBank.setText( ""+breakpoint.getTargetBank());
        jTextFieldExit.setText(breakpoint.getExitTypeString());
        jTextFieldCompare.setText(String.format("0x%04X", breakpoint.getCompareValue() & 0xFFFF));
        jTextFieldCounter.setText(""+breakpoint.getCounter());
        jTextFieldName.setText(""+breakpoint.getName());
        if (bp.wasTriggered())
        {
            setBackground(config.getValueChangedColor());
            bp.setTriggered(false);
        }
    }
}
